<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hins.mapper.ItemsCommentsMapperCustom" >

  <resultMap id="itemCommentVo" type="com.hins.pojo.vo.ItemCommentVO" >
    <result column="specName" property="specName"/>
    <result column="commentLevel" property="commentLevel" />
    <result column="content" property="content" />
    <result column="userFace" property="userFace" />
    <result column="nickName" property="nickName"  />
  </resultMap>


  <select id="selectItemComments" parameterType="Map" resultMap="itemCommentVo">
        SELECT
          ic.sepc_name as specName,
          ic.comment_level as commentLevel,
          ic.content as content,
          ic.created_time as createdTime,
          u.face as userFace,
          u.nickname as nickName
        FROM items_comments ic
        LEFT JOIN users u
        ON ic.user_id = u.id
        WHERE ic.item_id = #{paramMap.itemId}
        <if test="paramMap.level != null and paramMap.level != '' ">
          and ic.comment_level = #{paramMap.level}
        </if>
        ORDER BY ic.created_time desc
  </select>


</mapper>